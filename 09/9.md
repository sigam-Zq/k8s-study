
# k8s cka 题目知识点类型


## 1 RABC 权限模型

(RBAC)[https://kubernetes.io/zh-cn/docs/reference/access-authn-authz/rbac/]


## 2 节点维护

(cordon)[https://kubernetes.io/zh-cn/docs/reference/kubectl/generated/kubectl_cordon/]


(drain)[https://kubernetes.io/zh-cn/docs/reference/kubectl/generated/kubectl_drain/]



## 3 k8s版本升级

(ugrade)[https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/kubeadm/kubeadm-upgrade/]



## 4， etcd备份与还原


(etcd)[https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/configure-upgrade-etcd/]


```

etcdctl \
  --endpoints=https://127.0.0.1:2379 \
  --cacert=/etc/kubernetes/pki/etcd/ca.crt \
  --cert=/etc/kubernetes/pki/apiserver-etcd-client.crt \
  --key=/etc/kubernetes/pki/apiserver-etcd-client.key \
  member list


1d5a35a426b9afa3, started, kind-control-plane, https://10.89.0.15:2380, https://10.89.0.2:2379, false

alias etcdctl="etcdctl  --endpoints=https://127.0.0.1:2379  --cacert=/etc/kubernetes/pki/etcd/ca.crt  --cert=/etc/kubernetes/pki/apiserver-etcd-client.crt  --key=/etc/kubernetes/pki/apiserver-etcd-client.key" 




root@kind-control-plane:/# etcdctl member list
1d5a35a426b9afa3, started, kind-control-plane, https://10.89.0.15:2380, https://10.89.0.2:2379, false





root@kind-control-plane:~/etcdbak# etcdctl snapshot save snapshot.db
{"level":"info","ts":1761049143.502104,"caller":"snapshot/v3_snapshot.go:119","msg":"created temporary db file","path":"snapshot.db.part"}
{"level":"info","ts":"2025-10-21T12:19:03.509Z","caller":"clientv3/maintenance.go:200","msg":"opened snapshot stream; downloading"}
{"level":"info","ts":1761049143.5091052,"caller":"snapshot/v3_snapshot.go:127","msg":"fetching snapshot","endpoint":"https://127.0.0.1:2379"}
{"level":"info","ts":"2025-10-21T12:19:03.535Z","caller":"clientv3/maintenance.go:208","msg":"completed snapshot read; closing"}
{"level":"info","ts":1761049143.552091,"caller":"snapshot/v3_snapshot.go:142","msg":"fetched snapshot","endpoint":"https://127.0.0.1:2379","size":"3.9 MB","took":0.049471783}
{"level":"info","ts":1761049143.5521848,"caller":"snapshot/v3_snapshot.go:152","msg":"saved","path":"snapshot.db"}
Snapshot saved at snapshot.db
root@kind-control-plane:~/etcdbak# ls
snapshot.db




root@kind-control-plane:~/etcdbak# etcdctl --data-dir /var/lib/etcd snapshot restore snapshot.db
Error: data-dir "/var/lib/etcd" exists


 etcdctl --data-dir /var/lib/etcd2 snapshot restore snapshot.db
{"level":"info","ts":1761049678.549787,"caller":"snapshot/v3_snapshot.go:296","msg":"restoring snapshot","path":"snapshot.db","wal-dir":"/var/lib/etcd2/member/wal","data-dir":"/var/lib/etcd2","snap-dir":"/var/lib/etcd2/member/snap"}
{"level":"info","ts":1761049678.577035,"caller":"mvcc/kvstore.go:388","msg":"restored last compact revision","meta-bucket-name":"meta","meta-bucket-name-key":"finishedCompactRev","restored-compact-revision":34319}
{"level":"info","ts":1761049678.5941927,"caller":"membership/cluster.go:392","msg":"added member","cluster-id":"cdf818194e3a8c32","local-member-id":"0","added-peer-id":"8e9e05c52164694d","added-peer-peer-urls":["http://localhost:2380"]}
{"level":"info","ts":1761049678.6269171,"caller":"snapshot/v3_snapshot.go:309","msg":"restored snapshot","path":"snapshot.db","wal-dir":"/var/lib/etcd2/member/wal","data-dir":"/var/lib/etcd2","snap-dir":"/var/lib/etcd2/member/snap"}

```



## 5 NetWorkpolicy 网络模型




(NetWorkpolicy)[https://kubernetes.io/zh-cn/docs/concepts/services-networking/network-policies/]


## 6  Service


(Service)[https://kubernetes.io/zh-cn/docs/concepts/services-networking/service/]


## 7 Ingress 七层代理模型



(Ingress)[https://kubernetes.io/zh-cn/docs/concepts/services-networking/ingress/]

## 8 Deployment 管理pod扩缩容


```
k edit deployment nginx-deployment
```

OR

(scale)[https://kubernetes.io/zh-cn/docs/reference/kubectl/generated/kubectl_scale/]



## 9 pod指定节点部署


(分配pod到节点)[https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/assign-pods-nodes/]



## 10 检查Node节点的健康状态


```

 k get nodes |grep -i ready


 k describe node |grep Taint |grep NoSchedule

```





## 11 pod封装多个容器




## 持久好存储卷PersistentVolume


(PV)[https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/configure-persistent-volume-storage/]



## 13 PersistentVolumeClaim 动态申请存储卷



```
k edit pvc pv-volume

# 注意注解
metadata:
  annotations:
    kubernetes.io/change-cause: "resize"
# 具备上面的注释才可以调整大小

# 或者使用patch命令

k patch pvc pv-volume -p '{"spec":{"resources":{"requests":"{"storage":"79Mi"}"}}}' --record


```


## 14 收集Pod日志

(video)[https://www.bilibili.com/video/BV1Kz421U7i2?spm_id_from=333.788.videopod.episodes&vd_source=9d82f6f59d24c8b6a32623a779e09334&p=37]


```
kubectl logs foobar |grep unable-access-website > /opt/KUTR00101/foobar

```



## 15 Sidecar代理


(log)[https://kubernetes.io/zh-cn/docs/concepts/cluster-administration/logging/]


## 16 监控pod度量指标




## 17 集群故障排查


    