

Task

验证已经部署到集群的cert-manager 应用程序

使用kubectl ,创建所有的cert-manager 定制资源定义（CRD）的列表，并将其保存到 /home/ca/resource.yaml 文件中。

> 你必须使用kubectl 默认的输出格式，否则将导致分数降低


使用kubectl ，提取定制资源 certificate的subject 规范字段的文档,并将其保存到 /home/ca/subject.yaml 文件中。



要完成验证 cert-manager 部署并导出指定资源的任务，你可以按照以下步骤操作。我已经为你整理了关键命令和验证方法。

### 🔍 验证 cert-manager 部署

首先，我们需要确认 cert-manager 已在集群中正常运行。

1.  **检查命名空间和 Pod 状态**
    执行以下命令，确认 cert-manager 的 Pod 都处于 `Running` 状态：
    ```bash
    kubectl get pods -n cert-manager
    ```
    你应该会看到类似以下的输出，确认 `cert-manager`、`cert-manager-cainjector` 和 `cert-manager-webhook` 都在运行：
    ```bash
    NAME                                      READY   STATUS    RESTARTS   AGE
    cert-manager-5f98d7769d-xxxxx            1/1     Running   0          1d
    cert-manager-cainjector-7d4f9c6b8d-xxxxx 1/1     Running   0          1d
    cert-manager-webhook-587f6d765-xxxxx     1/1     Running   0          1d
    ```

2.  **检查 CRD 是否存在**
    cert-manager 的功能依赖于其定制的资源类型（CRD）。使用以下命令检查核心 CRD 是否已安装：
    ```bash
    kubectl get crd -l app.kubernetes.io/name=cert-manager
    ```
    确保输出中包含 `certificates.cert-manager.io`、`issuers.cert-manager.io`、`clusterissuers.cert-manager.io` 等关键 CRD。

### 📝 导出 CRD 列表与字段文档

接下来，完成你要求的文件导出任务。

1.  **导出 CRD 列表到 `/home/ca/resource.yaml`**
    使用以下命令导出所有 cert-manager 的 CRD 列表。**请注意：务必使用默认格式，不要添加 `-o yaml` 等参数**。
    ```bash
    kubectl get crd -l app.kubernetes.io/name=cert-manager > /home/ca/resource.yaml
    ```
    你可以使用 `cat /home/ca/resource.yaml` 检查文件内容，它应该是一个表格，列出了所有 cert-manager 相关的 CRD 及其创建时间。

2.  **提取 Certificate Subject 字段文档到 `/home/ca/subject.yaml`**
    `subject` 字段用于定义 TLS 证书的主题信息（如通用名、组织等）。使用 `kubectl explain` 命令可以获取其官方文档：
    ```bash
    kubectl explain certificates.spec.subject > /home/ca/subject.yaml
    ```
    **请注意**：这里使用的资源名称是 **`certificates`**（复数形式）。你可以用 `cat /home/ca/subject.yaml` 查看提取的文档。

### 💎 最后确认

请再次确认两个核心要求：
*   **导出 CRD 列表时**，使用的是 `kubectl get crd -l app.kubernetes.io/name=cert-manager` 命令，并且没有改变默认的输出格式。
*   **提取文档时**，`kubectl explain` 命令中指定的资源是 **`certificates.spec.subject`**（复数形式）。

希望这些步骤能帮助你顺利完成验证和导出工作。如果你在执行过程中遇到其他问题，随时可以再来问我。