# Readiness probe

```sh
kubectl create -f centos-readiness.yaml
```


## 现象

```
$ k get po -w
NAME                      READY   STATUS    RESTARTS       AGE
centos-7f8f96cc85-gwdmj   0/1     Running   0              11s
......
```

其中的 cat /tmp/healthy 不存在就不会 ready
去创建 /tmp/healthy 就会ready 删除后就回不ready

```
zq102@MSI MINGW64 /d/desktop/gitDemo/k8s/05
$ k exec centos-7f8f96cc85-gwdmj -- sh -c 'touch /tmp/healthy'
(base) 
zq102@MSI MINGW64 /d/desktop/gitDemo/k8s/05
$ k get po -w
NAME                      READY   STATUS    RESTARTS       AGE
centos-7f8f96cc85-gwdmj   1/1     Running   0              3m11s
nginx-7769f8f85b-d4tbh    1/1     Running   1 (128m ago)   18h

 
zq102@MSI MINGW64 /d/desktop/gitDemo/k8s/05
$ k exec centos-7f8f96cc85-gwdmj -- sh -c 'rm /tmp/healthy'
$ k get po 
NAME                      READY   STATUS    RESTARTS       AGE
centos-7f8f96cc85-gwdmj   0/1     Running   0              4m
nginx-7769f8f85b-d4tbh    1/1     Running   1 (129m ago)   18h

```